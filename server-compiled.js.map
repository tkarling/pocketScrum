{"version":3,"sources":["server.js"],"names":[],"mappings":"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","file":"server-compiled.js","sourcesContent":["var express = require(\"express\");\nvar bodyParser = require(\"body-parser\");\nvar cors = require(\"cors\");\nvar multer = require(\"multer\");\nvar upload = multer({ dest: 'upload/'});\n\n// passport specific\nvar session = require('express-session');\nvar passport = require('passport');\nvar FacebookStrategy = require('passport-facebook').Strategy;\nvar keys = require('./keys.js');\n\nvar FACEBOOK_APP_ID = keys.FACEBOOK_APP_ID;\nvar FACEBOOK_APP_SECRET = keys.FACEBOOK_APP_SECRET;\n//\n\nvar app = express();\nvar config = require('./config.js');\n\napp.use(function(req, res, next){\n    console.log('%s %s', req.method, req.url);\n    next();\n});\n// MIDDLEWARE\napp.use(express.static(\"public\"));\napp.use(bodyParser.urlencoded({\n    extended: true\n}));\n\n// passport specific\napp.use(session({\n    secret: 'some-random-string'\n}));\napp.use(passport.initialize());\napp.use(passport.session());\n//\napp.use(bodyParser.json());\napp.use(cors());\n\n// passport specific\npassport.use(new FacebookStrategy({\n    clientID: FACEBOOK_APP_ID,\n    clientSecret: FACEBOOK_APP_SECRET,\n    callbackURL: 'http://localhost:' + config.portNum + '/auth/facebook/callback'\n}, function(token, refreshToken, profile, done) {\n    console.log(\"profile: \", profile);\n    return done(null, profile);\n}));\n\napp.get('/auth/facebook', passport.authenticate('facebook'));\napp.get('/auth/facebook/callback', passport.authenticate('facebook', {\n    successRedirect: '/',\n    failureRedirect: '/auth/Facebook'\n}), function(req, res) {\n    console.log(\"req.session\", req.session);\n});\npassport.serializeUser(function(user, done) {\n    done(null, user);\n});\npassport.deserializeUser(function(obj, done) {\n    done(null, obj);\n});\n//\n\napp.get('/api/pocketScrum/logout', function(req, res){\n    req.logout();\n    res.redirect(\"http://localhost:3039/#/login\");\n});\napp.get('/api/pocketScrum/me', function(req, res) {\n    console.log(\"me\", req.user);\n    res.send(req.user);\n});\n\n\n// APIs\nvar PicCtrl = require(\"./controllers/PicCtrl\");\n\nimport { StatusCtrl, TeamMemberCtrl, UserStoryCtrl, FeatureCtrl, ProjectCtrl }  from './controllers/BaseCtrl-compiled.js';\nlet aStatusCtrl = new StatusCtrl();\nlet aTeamMemberCtrl = new TeamMemberCtrl();\nlet aUserStoryCtrl = new UserStoryCtrl();\nlet aFeatureCtrl = new FeatureCtrl();\nlet aProjectCtrl = new ProjectCtrl();\n\n\nvar type = upload.single('file');\napp.post('/api/pocketScrum/designpic', type, PicCtrl.upload);   // add one pic, thumb & data\n\napp.get(\"/api/pocketScrum/designpic\", PicCtrl.read);            // get list of pic data\napp.get(\"/api/pocketScrum/fullpic\", PicCtrl.readFullPic);       // get one full pic image\napp.get(\"/api/pocketScrum/thumbnail\", PicCtrl.readThumbnail);   // get one thumbnail image\n\napp.put(\"/api/pocketScrum/designpic\", PicCtrl.update);          // update pic data for one pic\napp.delete(\"/api/pocketScrum/designpic\", PicCtrl.delete);       // delete one pic, thumb & data\n\napp.post('/api/pocketScrum/status', aStatusCtrl.create.bind(aStatusCtrl));\napp.get(\"/api/pocketScrum/status\", aStatusCtrl.read.bind(aStatusCtrl));\napp.put(\"/api/pocketScrum/status\", aStatusCtrl.update.bind(aStatusCtrl));\napp.delete(\"/api/pocketScrum/status\", aStatusCtrl.delete.bind(aStatusCtrl));\n\napp.post('/api/pocketScrum/members', aTeamMemberCtrl.create.bind(aTeamMemberCtrl));\napp.get(\"/api/pocketScrum/members\", aTeamMemberCtrl.read.bind(aTeamMemberCtrl));\napp.put(\"/api/pocketScrum/members\", aTeamMemberCtrl.update.bind(aTeamMemberCtrl));\napp.delete(\"/api/pocketScrum/members\", aTeamMemberCtrl.delete.bind(aTeamMemberCtrl));\n\napp.post('/api/pocketScrum/stories', aUserStoryCtrl.create.bind(aUserStoryCtrl));\napp.get(\"/api/pocketScrum/stories\", aUserStoryCtrl.read.bind(aUserStoryCtrl));\napp.put(\"/api/pocketScrum/stories\", aUserStoryCtrl.update.bind(aUserStoryCtrl));\napp.delete(\"/api/pocketScrum/stories\", aUserStoryCtrl.delete.bind(aUserStoryCtrl));\n\napp.post('/api/pocketScrum/features', aFeatureCtrl.create.bind(aFeatureCtrl));\napp.get(\"/api/pocketScrum/features\", aFeatureCtrl.read.bind(aFeatureCtrl));\napp.put(\"/api/pocketScrum/features\", aFeatureCtrl.update.bind(aFeatureCtrl));\napp.delete(\"/api/pocketScrum/features\", aFeatureCtrl.delete.bind(aFeatureCtrl));\n\napp.post('/api/pocketScrum/projects', aProjectCtrl.create.bind(aProjectCtrl));\napp.get(\"/api/pocketScrum/projects\", aProjectCtrl.read.bind(aProjectCtrl));\napp.put(\"/api/pocketScrum/projects\", aProjectCtrl.update.bind(aProjectCtrl));\napp.delete(\"/api/pocketScrum/projects\", aProjectCtrl.delete.bind(aProjectCtrl));\n\n\n\nvar mongoose = require('mongoose');\nvar mongoUri = 'mongodb://localhost:27017/pocketScrum2';\nmongoose.set('debug', true);\nmongoose.connect(mongoUri);\nmongoose.connection.once('open', function() {\n    console.log('connected to mongoDB at: ', mongoUri);\n});\n\nvar server = app.listen(config.portNum, function() {\n    console.log(\"Listening at address\", server.address());\n});\n"]}