{"version":3,"sources":["picsStore.js"],"names":[],"mappings":"AAAA,YAAY,CAAC;;;;;;;;;;AAEb,IAAI,OAAO,GAAG,SAAS,CAAC;AACxB,IAAI,UAAU,GAAG,YAAY,CAAC;;IAExB,WAAW;AACF,aADT,WAAW,CACD,UAAU,EAAE;8BADtB,WAAW;;AAET,YAAI,CAAC,UAAU,GAAG,UAAU,CAAC;KAChC;;iBAHC,WAAW;;eAKP,gBAAC,IAAI,EAAE;AACT,gBAAI,CAAC,UAAU,CAAC,IAAI,CAAC;AACjB,0BAAU,EAAE,OAAO;AACnB,oBAAI,EAAE,IAAI;aACb,CAAC,CAAC;SACN;;;eAEQ,mBAAC,IAAI,EAAE;AACZ,gBAAI,CAAC,UAAU,CAAC,IAAI,CAAC;AACjB,0BAAU,EAAE,UAAU;AACtB,oBAAI,EAAE,IAAI;aACb,CAAC,CAAC;SACN;;;WAjBC,WAAW;;;AAmBjB,OAAO,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,OAAO,CAAC,aAAa,EAAE,WAAW,CAAC,CAAC;;IAGtD,SAAS;cAAT,SAAS;;AACA,aADT,SAAS,CACC,WAAW,EAAE;8BADvB,SAAS;;AAEP,mCAFF,SAAS,6CAEC;AACR,YAAI,CAAC,WAAW,GAAG,WAAW,CAAC;AAC/B,YAAI,CAAC,IAAI,GAAG,EAAE,CAAC;AACf,YAAI,CAAC,UAAU,EAAE,CAAC;KACrB;;iBANC,SAAS;;eAQJ,mBAAG;AACN,mBAAO,IAAI,CAAC,IAAI,CAAC;SACpB;;;eAEK,gBAAC,GAAG,EAAE;AACR,gBAAI,CAAC,IAAI,CAAC,IAAI,CAAC,EAAC,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,GAAG,EAAC,CAAC,CAAC;SACtC;;;eAEQ,mBAAC,GAAG,EAAE;AACX,mBAAO,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;SAC1C;;;eAES,sBAAG;AACT,gBAAI,IAAI,GAAG,IAAI,CAAC;AAChB,gBAAI,CAAC,WAAW,CAAC,WAAW,EAAE,CAAC,IAAI,CAAC,UAAS,QAAQ,EAAE;AACnD,oBAAI,CAAC,IAAI,GAAG,QAAQ,CAAC;AACrB,oBAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;aACvB,CAAC,CAAC;SACN;;;WA1BC,SAAS;GAAS,YAAY;;AA6BpC,OAAO,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,OAAO,CAAC,WAAW,EAAE,UAAU,UAAU,EAAE,WAAW,EAAE;AAC5E,QAAI,SAAS,GAAG,IAAI,SAAS,CAAC,WAAW,CAAC,CAAC;;AAE3C,cAAU,CAAC,WAAW,CAAC,UAAU,MAAM,EAAE;AACrC,gBAAO,MAAM,CAAC,UAAU;AACpB,iBAAK,OAAO;AACR,yBAAS,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;AAC9B,yBAAS,CAAC,UAAU,EAAE,CAAC;AACvB,sBAAM;;AAAA,AAEV,iBAAK,UAAU;AACX,yBAAS,CAAC,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,UAAS,QAAQ,EAAE;AACrD,6BAAS,CAAC,UAAU,EAAE,CAAC;iBAC1B,CAAC,CAAC;AACH,sBAAM;AAAA,SACb;KAEJ,CAAC,CAAC;;;AAGH,QAAI,CAAC,WAAW,GAAG,UAAS,CAAC,EAAE;AACvB,iBAAS,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;KAChC,CAAC;;AAEF,QAAI,CAAC,OAAO,GAAG,YAAW;AAClB,eAAO,SAAS,CAAC,OAAO,EAAE,CAAC;KAClC,CAAC;CACL,CAAC,CAAC","file":"picsStore-compiled.js","sourcesContent":["\"use strict\";\n\nvar ADD_PIC = \"ADD_PIC\";\nvar REMOVE_PIC = \"REMOVE_PIC\";\n\nclass picsActions {\n    constructor(dispatcher) {\n        this.dispatcher = dispatcher;\n    }\n\n    addPic(item) {\n        this.dispatcher.emit({\n            actionType: ADD_PIC,\n            item: item\n        });\n    }\n\n    removePic(item) {\n        this.dispatcher.emit({\n            actionType: REMOVE_PIC,\n            item: item\n        });\n    }\n}\nangular.module(\"myApp\").service(\"picsActions\", picsActions);\n\n\nclass PicsStore extends EventEmitter {\n    constructor(picsService) {\n        super();\n        this.picsService = picsService;\n        this.pics = [];\n        this.emitChange();\n    }\n\n    getPics() {\n        return this.pics;\n    }\n\n    addPic(pic) {\n        this.pics.push({qty: 1, pic: pic});\n    }\n\n    removePic(pic) {\n        return this.picsService.removePic(pic);\n    }\n\n    emitChange() {\n        var self = this;\n        this.picsService.getPicDatas().then(function(picDatas) {\n            self.pics = picDatas;\n            self.emit(\"change\");\n        });\n    }\n}\n\nangular.module(\"myApp\").service(\"picsStore\", function (dispatcher, picsService) {\n    var picsStore = new PicsStore(picsService);\n\n    dispatcher.addListener(function (action) {\n        switch(action.actionType){\n            case ADD_PIC:\n                picsStore.addPic(action.item);\n                picsStore.emitChange();\n                break;\n\n            case REMOVE_PIC:\n                picsStore.removePic(action.item).then(function(response) {\n                    picsStore.emitChange();\n                });\n                break;\n        }\n\n    });\n\n    //expose only the public interface\n    this.addListener = function(l) {\n            picsStore.addListener(l);\n    };\n\n    this.getPics = function() {\n            return picsStore.getPics();\n    };\n});\n"]}