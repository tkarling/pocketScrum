{"version":3,"sources":["userStoryStore.js"],"names":[],"mappings":"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","file":"userStoryStore-compiled.js","sourcesContent":["\"use strict\";\n\nvar ADD_STORY = \"ADD_STORY\";\nvar REMOVE_STORY = \"REMOVE_STORY\";\nvar SELECT_PIC = \"SELECT_PIC\";\nvar SAVE_PIC = \"SAVE_PIC\";\n\nclass userStoryActions {\n    constructor(dispatcher) {\n        this.dispatcher = dispatcher;\n    }\n\n    addStory(item) {\n        this.dispatcher.emit({\n            actionType: ADD_STORY,\n            item: item\n        });\n    }\n\n    removeStory(item) {\n        this.dispatcher.emit({\n            actionType: REMOVE_STORY,\n            item: item\n        });\n    }\n\n    saveStory(item) {\n        this.dispatcher.emit({\n            actionType: SAVE_PIC,\n            item: item\n        });\n    }\n}\nangular.module(\"myApp\").service(\"userStoryActions\", userStoryActions);\n\n\nclass UserStoryStore extends EventEmitter {\n    constructor(userStoryService) {\n        super();\n        this.userStoryService = userStoryService;\n\n        this.stories = [];\n        this.errorMsg = \"\";\n\n        this.emitChange();\n    }\n\n    getStories() {\n        return this.stories;\n    }\n\n    getErrorMsg() {\n        return this.errorMsg;\n    }\n\n    addStory(story) {\n        var self = this;\n        this.errorMsg = \"\";\n        return this.userStoryService.addStory(story)\n            .then(function (response) {\n            }, function (error) {\n                if (error.status > 0) {\n                    console.log(\"addStory error\", error);\n                    self.errorMsg = error.status + ': ' + error.statusText;\n                }\n            });\n    }\n\n    removeStory(story) {\n        this.errorMsg = \"\";\n        return this.userStoryService.removeStory(story);\n    }\n\n    saveStory(story) {\n        this.errorMsg = \"\";\n        return this.userStoryService.saveStory(story);\n    }\n\n    emitChange() {\n        var self = this;\n        this.userStoryService.getStories().then(function (stories) {\n            self.stories = stories;\n            self.emit(\"change\");\n        });\n    }\n\n}\n\nangular.module(\"myApp\").service(\"userStoryStore\", function (dispatcher, userStoryService) {\n    var userStoryStore = new UserStoryStore(userStoryService);\n\n    dispatcher.addListener(function (action) {\n        switch (action.actionType) {\n            case ADD_STORY:\n                userStoryStore.addStory(action.item).then(function (response) {\n                    userStoryStore.emitChange();\n                });\n                break;\n\n            case REMOVE_STORY:\n                userStoryStore.removeStory(action.item).then(function (response) {\n                    userStoryStore.emitChange();\n                });\n                break;\n\n            case SAVE_PIC:\n                userStoryStore.saveStory(action.item).then(function (response) {\n                    userStoryStore.emitChange();\n                });\n                break;\n\n        }\n\n\n    });\n\n    //expose only the public interface\n    this.addListener = function (l) {\n        userStoryStore.addListener(l);\n    };\n\n    this.getStories = function () {\n        return userStoryStore.getStories();\n    };\n\n    this.getErrorMsg = function () {\n        return userStoryStore.getErrorMsg();\n    };\n});\n"]}