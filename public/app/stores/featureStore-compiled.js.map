{"version":3,"sources":["featureStore.js"],"names":[],"mappings":"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","file":"featureStore-compiled.js","sourcesContent":["\"use strict\";\n\nvar ADD_FEATURE = \"ADD_FEATURE\";\nvar REMOVE_FEATURE = \"REMOVE_FEATURE\";\nvar SAVE_FEATURE = \"SAVE_FEATURE\";\nvar PROJECT_SET = \"PROJECT_SET\";\n\nclass featureActions {\n    constructor(dispatcher) {\n        this.dispatcher = dispatcher;\n    }\n\n    addFeature(item) {\n        this.dispatcher.emit({\n            actionType: ADD_FEATURE,\n            item: item\n        });\n    }\n\n    removeFeature(item) {\n        this.dispatcher.emit({\n            actionType: REMOVE_FEATURE,\n            item: item\n        });\n    }\n\n    saveFeature(item) {\n        this.dispatcher.emit({\n            actionType: SAVE_FEATURE,\n            item: item\n        });\n    }\n\n    projectSet(item) {\n        this.dispatcher.emit({\n            actionType: PROJECT_SET,\n            item: item\n        });\n    }\n}\nangular.module(\"myApp\").service(\"featureActions\", featureActions);\n\n\nclass FeatureStore extends EventEmitter {\n    constructor(featureService) {\n        super();\n        this.featureService = featureService;\n\n        this.featurees = [];\n        this.errorMsg = \"\";\n\n        //this.emitChange();\n        console.log(\"init Feature S T O R E\", this);\n    }\n\n    getFeatures() {\n        return this.featurees;\n    }\n\n    getErrorMsg() {\n        return this.errorMsg;\n    }\n\n    addFeature(feature) {\n        var self = this;\n        this.errorMsg = \"\";\n        return this.featureService.addItem(feature)\n            .then(function (response) {\n            }, function (error) {\n                if (error.feature > 0) {\n                    console.log(\"addFeature error\", error);\n                    self.errorMsg = error.feature + ': ' + error.featureText;\n                }\n            });\n    }\n\n    removeFeature(feature) {\n        this.errorMsg = \"\";\n        return this.featureService.removeItem(feature);\n    }\n\n    saveFeature(feature) {\n        this.errorMsg = \"\";\n        return this.featureService.saveItem(feature);\n    }\n\n    emitChange() {\n        var self = this;\n        this.featureService.getItems().then(function (featurees) {\n            self.featurees = featurees;\n            self.emit(\"change\");\n        });\n    }\n\n}\n\nangular.module(\"myApp\").service(\"featureStore\", function (dispatcher, featureService) {\n    var featureStore = new FeatureStore(featureService);\n\n    dispatcher.addListener(function (action) {\n        switch (action.actionType) {\n            case ADD_FEATURE:\n                featureStore.addFeature(action.item).then(function (response) {\n                    featureStore.emitChange();\n                });\n                break;\n\n            case REMOVE_FEATURE:\n                featureStore.removeFeature(action.item).then(function (response) {\n                    featureStore.emitChange();\n                });\n                break;\n\n            case SAVE_FEATURE:\n                featureStore.saveFeature(action.item).then(function (response) {\n                    featureStore.emitChange();\n                });\n                break;\n\n            case PROJECT_SET:\n                featureStore.emitChange();\n                break;\n\n        }\n\n\n    });\n\n    //expose only the public interface\n    this.addListener = function (l) {\n        featureStore.addListener(l);\n    };\n\n    this.getFeatures = function () {\n        return featureStore.getFeatures();\n    };\n\n    this.getErrorMsg = function () {\n        return featureStore.getErrorMsg();\n    };\n});\n\n\n"]}