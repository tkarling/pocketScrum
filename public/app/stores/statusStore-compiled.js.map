{"version":3,"sources":["statusStore.js"],"names":[],"mappings":"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","file":"statusStore-compiled.js","sourcesContent":["\"use strict\";\n\nvar ADD_STATUS = \"ADD_STATUS\";\nvar REMOVE_STATUS = \"REMOVE_STATUS\";\nvar SAVE_STATUS = \"SAVE_STATUS\";\n\nclass statusActions {\n    constructor(dispatcher) {\n        this.dispatcher = dispatcher;\n    }\n\n    addStatus(item) {\n        this.dispatcher.emit({\n            actionType: ADD_STATUS,\n            item: item\n        });\n    }\n\n    removeStatus(item) {\n        this.dispatcher.emit({\n            actionType: REMOVE_STATUS,\n            item: item\n        });\n    }\n\n    saveStatus(item) {\n        this.dispatcher.emit({\n            actionType: SAVE_STATUS,\n            item: item\n        });\n    }\n}\nangular.module(\"myApp\").service(\"statusActions\", statusActions);\n\n\nclass StatusStore extends EventEmitter {\n    constructor(statusService) {\n        super();\n        this.statusService = statusService;\n\n        this.statuses = [];\n        this.errorMsg = \"\";\n\n        this.emitChange();\n    }\n\n    getStatuses() {\n        return this.statuses;\n    }\n\n    getErrorMsg() {\n        return this.errorMsg;\n    }\n\n    addStatus(status) {\n        var self = this;\n        this.errorMsg = \"\";\n        return this.statusService.addItem(status)\n            .then(function (response) {\n            }, function (error) {\n                if (error.status > 0) {\n                    console.log(\"addStatus error\", error);\n                    self.errorMsg = error.status + ': ' + error.statusText;\n                }\n            });\n    }\n\n    removeStatus(status) {\n        this.errorMsg = \"\";\n        return this.statusService.removeItem(status);\n    }\n\n    saveStatus(status) {\n        this.errorMsg = \"\";\n        return this.statusService.saveItem(status);\n    }\n\n    emitChange() {\n        var self = this;\n        this.statusService.getItems().then(function (statuses) {\n            self.statuses = statuses;\n            self.emit(\"change\");\n        });\n    }\n\n}\n\nangular.module(\"myApp\").service(\"statusStore\", function (dispatcher, statusService) {\n    var statusStore = new StatusStore(statusService);\n\n    dispatcher.addListener(function (action) {\n        switch (action.actionType) {\n            case ADD_STATUS:\n                statusStore.addStatus(action.item).then(function (response) {\n                    statusStore.emitChange();\n                });\n                break;\n\n            case REMOVE_STATUS:\n                statusStore.removeStatus(action.item).then(function (response) {\n                    statusStore.emitChange();\n                });\n                break;\n\n            case SAVE_STATUS:\n                statusStore.saveStatus(action.item).then(function (response) {\n                    statusStore.emitChange();\n                });\n                break;\n\n        }\n\n\n    });\n\n    //expose only the public interface\n    this.addListener = function (l) {\n        statusStore.addListener(l);\n    };\n\n    this.getStatuses = function () {\n        return statusStore.getStatuses();\n    };\n\n    this.getErrorMsg = function () {\n        return statusStore.getErrorMsg();\n    };\n});\n\n"]}