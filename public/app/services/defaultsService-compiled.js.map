{"version":3,"sources":["defaultsService.js"],"names":[],"mappings":"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","file":"defaultsService-compiled.js","sourcesContent":["\"use strict\";\n\n//defaults service\nclass C {\n    constructor($http, $log, $q, statusService, teamMemberService, userStoryService,\n                featureService, projectService, picsService) {\n        this.$http = $http;\n        this.$log = $log;\n        this.$q = $q;\n\n        this.statusService = statusService;\n        this.teamMemberService = teamMemberService;\n        this.featureService = featureService;\n        this.userStoryService = userStoryService;\n        this.projectService = projectService;\n        this.picsService = picsService;\n\n        this.setupDefaultsAndDBIfNeeded();\n\n        //this.setupOneProject(\"My 5th Project\");\n\n        // FOR TESTING & DB FIXING\n        //this.readAll();\n        //this.setProjectForMembers();\n        //this.setProjectForFeatures();\n        //this.setStatusForUserStories();\n        //this.setProjectForPictures();\n    }\n\n    getDefaultValues () {\n        this.featureService.getItem(\"name\", \"All Features\").then((item)=>{\n            this.ALL_FEATURES_ID = item._id;\n        });\n        this.teamMemberService.getItem(\"name\", \"All Members\").then((item)=>{\n            this.ALL_MEMBERS_ID = item._id;\n        });\n        this.teamMemberService.getItem(\"name\", \"Not Assigned\").then((item)=>{\n            this.NOT_SET_MEMBER_ID = item._id;\n        });\n        this.statusService.getItem(\"name\", \"not started\").then((item)=>{\n            this.NOT_STARTED_STATUS_ID = item._id;\n        });\n        this.picsService.getPicData(\"keywords[0]\", \"default member pic\").then((item)=>{\n            //console.log(\"item\", item);\n            if(item) {\n                this.DEFAULT_MEMBER_PIC_ID = item.picId;\n                //console.log(\"this.DEFAULT_MEMBER_PIC_ID\", this.DEFAULT_MEMBER_PIC_ID);\n            } else {\n                this.$log.error(\"no MEMBER PIC\");\n            }\n        });\n        this.projectService.getItems().then((items)=>{\n            if(items.length > 0) {\n                this.DEFAULT_PROJECT_ID = items[0]._id;\n                //console.log(\"this.DEFAULT_PROJECT_ID\", this.DEFAULT_PROJECT_ID);\n            } else {\n                this.$log.error(\"no default project\");\n            }\n        });\n    }\n\n    setupDefaultsAndDBIfNeeded() {\n        this.projectService.getItems().then((items) => {\n            if (items.length === 0) {\n                // setup DB, set default values & setup sample project\n                this.$q.all([this.setupDefaultFeatures(),\n                    this.setupDefaultMembers()]).then(() => {\n                    this.getDefaultValues();\n                    this.setupSampleProject(\"My 1st project\");\n                });\n            } else {\n                // just set default values\n                this.getDefaultValues();\n            }\n        });\n    }\n\n\n    setupSampleProject(projectName) {\n       this.addProject(projectName).then((addedProject) => {\n           this.setupSampleFeatures(addedProject._id);\n           this.setupSampleMembers(addedProject._id);\n       });\n    }\n\n    addProject(name) {\n        return this.projectService.addItem({name: name}).then((addedItem) => {\n            return addedItem;\n        });\n    }\n\n    setupDefaultFeatures() {\n        return this.featureService.getItems().then((items) => {\n            if (items.length === 0) {\n                return this.featureService.addItem({name: \"All Features\", noShow: true,});\n            }\n        });\n    }\n\n    setupSampleFeatures(project) {\n        this.featureService.addItem({name: \"Feature1\", project: project});\n        this.featureService.addItem({name: \"Feature2\", project: project});\n    }\n\n    setupDefaultMembers() {\n        return this.teamMemberService.getItems().then((items) => {\n            if (items.length === 0) {\n                return this.$q.all([\n                    this.teamMemberService.addItem({\n                        name: \"All Members\", noShow: true,\n                        authId: \"All Members\", authProvider: \"All Members\",\n                        email: \"All Members\"\n                    }),\n                    this.teamMemberService.addItem({\n                        name: \"Not Assigned\",\n                        authId: \"Not Assigned\", authProvider: \"Not Assigned\",\n                        email: \"Not Assigned\"\n                    })]);\n            }\n        });\n    }\n\n    setupSampleMembers(project) {\n        this.teamMemberService.addItem({name: \"Test Member\",\n            authId: project, authProvider: \"facebook\",\n            email: project,\n            project: project});\n    }\n    \n\n    readAll() {\n        this.teamMemberService.getItems().then((items) => {\n            console.log(\"teamMemberService\", items);\n            this.featureService.getItems().then((items) => {\n                console.log(\"featureService\", items);\n                this.userStoryService.getItems().then((items) => {\n                    console.log(\"userStoryService\", items);\n                    this.picsService.getPicDatas().then((items) => {\n                        console.log(\"picsService\", items);\n                        this.statusService.getItems().then((items) => {\n                            console.log(\"statusService\", items);\n                        });\n                    });\n                });\n            });\n        });\n    }\n\n    setProjectForMembers() {\n        this.teamMemberService.getItems().then((items) => {\n            console.log(\"teamMemberService items\", items);\n            for (var i = 0; i < items.length; i++) {\n                //console.log(items[i]);\n                items[i].currentProject = \"55e61a9eb63286404af60c61\";\n                this.teamMemberService.saveItem(items[i]);\n            }\n        });\n    }\n\n    setProjectForFeatures() {\n        this.featureService.getItems().then((items) => {\n            console.log(\"featureService items\", items);\n            for (var i = 0; i < items.length; i++) {\n                //console.log(items[i]);\n                items[i].project = \"55e61a9eb63286404af60c61\";\n                this.featureService.saveItem(items[i]);\n            }\n        });\n    }\n\n    setStatusForUserStories() {\n        this.userStoryService.getItems().then((items) => {\n            console.log(\"userStoryService items\", items);\n            for (var i = 0; i < items.length; i++) {\n                //console.log(items[i]);\n                items[i].status = this.NOT_STARTED_STATUS_ID;\n                this.userStoryService.saveItem(items[i]);\n            }\n        });\n    }\n\n    setProjectForPictures() {\n        this.picsService.getPicDatas().then((items) => {\n            console.log(\"picsService items\", items);\n            for (var i = 0; i < items.length; i++) {\n                //console.log(items[i]);\n                items[i].project = \"55e61a9eb63286404af60c61\";\n                this.picsService.savePic(items[i]);\n            }\n        });\n    }\n\n}\n\nangular.module(\"myApp\").service(\"C\", C);\n"]}