{"version":3,"sources":["picsListController.js"],"names":[],"mappings":"AAAA,YAAY,CAAC;;;;;;IAEP,kBAAkB;AACT,aADT,kBAAkB,CACR,SAAS,EAAE,SAAS,EAAE,WAAW,EAAE,MAAM,EAAE,QAAQ,EAAE;8BAD/D,kBAAkB;;AAEhB,YAAI,CAAC,GAAG,GAAG,SAAS,CAAC,GAAG,CAAC;AACzB,YAAI,CAAC,SAAS,GAAG,SAAS,CAAC;AAC3B,YAAI,CAAC,WAAW,GAAG,WAAW,CAAC;AAC/B,YAAI,CAAC,MAAM,GAAG,MAAM,CAAC;AACrB,YAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;AACzB,YAAI,CAAC,SAAS,EAAE,CAAC;AACjB,YAAI,CAAC,eAAe,EAAE,CAAC;;AAEvB,YAAI,CAAC,WAAW,GAAG,IAAI,CAAC,GAAG,GAAG,YAAY,CAAC;AAC3C,YAAI,CAAC,YAAY,GAAG,IAAI,CAAC,GAAG,GAAG,gBAAgB,CAAC;AAChD,YAAI,CAAC,UAAU,GAAG,IAAI,CAAC,GAAG,GAAG,cAAc,CAAC;;AAE5C,YAAI,IAAI,GAAG,IAAI,CAAC;AAChB,iBAAS,CAAC,WAAW,CAAC,YAAY;AAC9B,gBAAI,CAAC,SAAS,EAAE,CAAC;AACjB,qBAAS,CAAC,WAAW,CAAC,YAAY;AAC9B,oBAAI,CAAC,eAAe,EAAE,CAAC;aAC1B,CAAC,CAAC;SACN,CAAC,CAAC;KAEN;;iBAtBC,kBAAkB;;eAwBX,qBAAG;AACR,gBAAI,CAAC,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,OAAO,EAAE,CAAC;AACrC,gBAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,WAAW,EAAE,CAAC;SAChD;;;eAEc,2BAAG;AACd,gBAAI,CAAC,UAAU,GAAG,IAAI,CAAC,SAAS,CAAC,aAAa,EAAE,CAAC;SACpD;;;eAEK,gBAAC,GAAG,EAAE;AACR,gBAAI,CAAC,CAAC,GAAG,GAAG,CAAC;AACb,gBAAI,CAAC,WAAW,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;SAChC;;;eAEQ,mBAAC,GAAG,EAAE,KAAK,EAAE;AAClB,gBAAI,CAAC,CAAC,GAAG,SAAS,CAAC;AACnB,gBAAI,CAAC,WAAW,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;AAChC,gBAAG,KAAK,EAAC;AACL,qBAAK,CAAC,eAAe,EAAE,CAAC;AACxB,qBAAK,CAAC,cAAc,EAAE,CAAC;aAC1B;SACJ;;;eAEQ,mBAAC,GAAG,EAAE;AACX,gBAAI,CAAC,OAAO,EAAE,CAAC;AACf,gBAAG,GAAG,CAAC,GAAG,KAAK,IAAI,CAAC,UAAU,CAAC,GAAG,EAAE;AAChC,oBAAI,CAAC,CAAC,GAAG,SAAS,CAAC;;AAEnB,oBAAI,CAAC,WAAW,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;aACnC;SACJ;;;eAEM,mBAAG;AACN,gBAAG,IAAI,CAAC,UAAU,CAAC,GAAG,EAAE;AACpB,oBAAI,CAAC,WAAW,CAAC,OAAO,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;aAC7C;SACJ;;;WA5DC,kBAAkB;;;AAgExB,OAAO,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,UAAU,CAAC,oBAAoB,EAAE,kBAAkB,CAAC,CAAC","file":"picsListController-compiled.js","sourcesContent":["\"use strict\";\n\nclass PicsListController {\n    constructor(MY_SERVER, picsStore, picsActions, Upload, $timeout) {\n        this.url = MY_SERVER.url;\n        this.picsStore = picsStore;\n        this.picsActions = picsActions;\n        this.Upload = Upload;\n        this.$timeout = $timeout;\n        this.resetPics();\n        this.resetCurrentPic();\n\n        this.picsBaseUrl = this.url + \"/designpic\";\n        this.thumbnailUrl = this.url + \"/thumbnail?id=\";\n        this.fullPicUrl = this.url + \"/fullpic?id=\";\n\n        var self = this;\n        picsStore.addListener(function () {\n            self.resetPics();\n            picsStore.addListener(function () {\n                self.resetCurrentPic();\n            });\n        });\n\n    }\n\n    resetPics() {\n        this.pics = this.picsStore.getPics();\n        this.errorMsg = this.picsStore.getErrorMsg();\n    }\n\n    resetCurrentPic() {\n        this.currentPic = this.picsStore.getCurrentPic();\n    }\n\n    addPic(pic) {\n        this.f = pic;\n        this.picsActions.addPic(pic);\n    }\n\n    removePic(pic, event) {\n        this.f = undefined;\n        this.picsActions.removePic(pic);\n        if(event){\n            event.stopPropagation();\n            event.preventDefault();\n        }\n    }\n\n    selectPic(pic) {\n        this.savePic();\n        if(pic._id !== this.currentPic._id) {\n            this.f = undefined;\n            //console.log(\"selectPic\", pic);\n            this.picsActions.selectPic(pic);\n        }\n    }\n\n    savePic() {\n        if(this.currentPic._id) {\n            this.picsActions.savePic(this.currentPic);\n        }\n    }\n\n}\n\nangular.module(\"myApp\").controller(\"PicsListController\", PicsListController);"]}